{"version":3,"sources":["webpack:///webpack/bootstrap baa7255076edc8aa8850","webpack:///./javascripts/card.js","webpack:///./javascripts/dungeon.js","webpack:///./javascripts/board.js","webpack:///./javascripts/deck.js","webpack:///./javascripts/dungeon_row.js","webpack:///./javascripts/player_row.js","webpack:///./javascripts/fire.js","webpack:///./javascripts/dd_view.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACvDA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACND;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,OAAO;AAC1B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;AC9OA;;AAEA;;AAEA;AACA;AACA,mBAAmB,OAAO;AAC1B,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;ACxDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACtCA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;;;;;;;;ACfA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iCAAiC,sBAAsB;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,SAAS;AAC5C;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,MAAM;AACtC,mCAAmC,SAAS;AAC5C;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0CAA0C,+CAA+C;AACzF;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS,WAAW,wBAAwB;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap baa7255076edc8aa8850","class Card {\n  constructor(suit, value, img) {\n    this.suit = suit;\n    this.value = value;\n    this.destroyed = false;\n    this.specialValue = 0;\n    this.frozen = false;\n    this.img = img;\n    this.validTarget = false;\n  }\n\n  updateValue(change) {\n    this.value += change;\n  }\n\n  updateSpecial(change) {\n    this.specialValue += change;\n  }\n\n  destroy() {\n    this.destroyed = true;\n  }\n\n  freeze() {\n    this.frozen = true;\n  }\n\n}\n\nCard.suits = [\n  \"shields\",\n  \"swords\",\n  \"coins\",\n  \"potions\",\n  \"monsters\",\n  \"magic\"\n];\n\nCard.values = [\n  2, 3, 4, 5, 6, 7, 8, 9, 10, \"magic door\"\n];\n\n// gladius: https://i.imgur.com/izEcuUG.png\n\n\nCard.imgs = [\n  \"https://i.imgur.com/Rh8gBbL.png\",\n  \"https://i.imgur.com/1ZbWLXW.png\",\n  \"https://i.imgur.com/X2gtjkv.png\",\n  \"https://i.imgur.com/TEn6e6B.png\",\n  \"https://i.imgur.com/ceKsUWJ.png\",\n  \"https://i.imgur.com/0JJTGtd.png\",\n  \"https://i.imgur.com/L89XhPg.png\",\n];\n\nexport default Card;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/card.js\n// module id = 0\n// module chunks = 0","import Board from './board.js';\nimport View from './dd_view.js';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const root = $('.dd');\n  new View(new Board, root);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/dungeon.js\n// module id = 1\n// module chunks = 0","import Deck from './deck.js';\nimport DungeonRow from './dungeon_row.js';\nimport PlayerRow from './player_row.js';\nimport Fire from './fire.js';\n\nclass Board {\n\n  constructor() {\n    this.Deck = new Deck;\n    this.DungeonRow = new DungeonRow;\n    this.populateDungeon(4);\n    this.PlayerRow = new PlayerRow;\n    this.Fire = new Fire;\n    this.moveBuffer = null;\n    this.validSpaces = [];\n  }\n\n  populateDungeon(n) {\n    const newCards = this.Deck.draw(n);\n    this.DungeonRow.fillEmpties(newCards);\n  }\n\n  popIfDungeonEmpty() {\n    let count = this.DungeonRow.count;\n    if (count < 2) {\n      if (count === 1) {\n        this.populateDungeon(3);\n      } else if (count === 0) {\n        this.populateDungeon(4);\n      }\n      this.PlayerRow.destroyTemps();\n      this.clearAllDestroyed();\n    }\n  }\n\n  burnCard(card = this.moveBuffer) {\n    const meltValue = this.Fire.melt(card);\n    this.PlayerRow.player().updateSpecial(meltValue);\n    this.clearAllDestroyed();\n  }\n\n  clearAllDestroyed() {\n    this.DungeonRow.clearDestroyed();\n    this.PlayerRow.clearDestroyed();\n  }\n\n  selectTarget(target) {\n    if (!this.moveBuffer) {\n      if (target.card === null) {\n        return;\n      } else if (target.card.suit === \"player\") {\n        return;\n      } else if (target.location.row === \"player\") {\n          if (target.card.suit === \"shields\") {\n            return;\n          }\n      }\n    }\n\n    if (target.card && target.card.frozen) {\n      return;\n    }\n\n    if (!this.moveBuffer) {\n      this.moveBuffer = target;\n      this.highlightTargets();\n    } else if (target.card === this.moveBuffer.card) {\n      this.moveBuffer = null;\n      this.removeHighlights();\n    } else if (this.legalMove(target)){\n      this.removeHighlights();\n      this.resolveAction(target);\n    }\n  }\n\n  removeHighlights() {\n    for (let i = 0; i < 4; i++) {\n      if (this.DungeonRow.spaces[i].length > 0) {\n        this.DungeonRow.spaces[i][0].validTarget = false;\n      }\n      if (this.PlayerRow.spaces[i].length > 0) {\n        this.PlayerRow.spaces[i][0].validTarget = false;\n      }\n    }\n    this.validSpaces = [];\n  }\n\n  resolveAction(target) {\n    const bCard = this.moveBuffer.card;\n    const bLoc = this.moveBuffer.location;\n    const tCard = target.card;\n    const tLoc = target.location;\n\n    if (bCard.suit === \"monsters\") {\n      if (tCard.suit === \"player\") {\n        bCard.destroy();\n        tCard.updateValue(bCard.value * -1);\n        if (tCard.value < 1) {\n          tCard.destroy();\n        }\n      } else if (tCard.suit === \"shields\") {\n        bCard.destroy();\n        const leftover = bCard.value - tCard.value;\n        tCard.updateValue(bCard.value * -1);\n        if (tCard.value < 1) {\n          tCard.destroy();\n          if (leftover > 0) {\n            const player = this.PlayerRow.player();\n            player.updateValue(leftover * -1);\n            if (player.value < 1) {\n              player.destroy();\n            }\n          }\n        }\n      }\n    } else if (bLoc.row === \"dungeon\"){\n      if (tLoc.row === \"fire\") {\n        bCard.destroy();\n        if (bCard.suit !== \"coins\" && bCard.suit !== \"magic\") {\n          const player = this.PlayerRow.player();\n          player.updateSpecial(bCard.value);\n        }\n      } else if (this.PlayerRow.spaces[tLoc.idx].length === 0) {\n        let card = this.DungeonRow.spaces[bLoc.idx].pop();\n        this.PlayerRow.spaces[tLoc.idx].push(card);\n        if (card.suit === \"coins\") {\n          card.freeze();\n          const player = this.PlayerRow.player();\n          player.updateSpecial(bCard.value);\n        }\n      }\n    } else if (bLoc.row === \"player\") {\n      if (bCard.suit === \"potions\") {\n        bCard.freeze();\n        const player = this.PlayerRow.player();\n        player.updateValue(bCard.value);\n        if (player.value > 13) {\n          player.value = 13;\n        }\n      } else if (bCard.suit === \"swords\") {\n        bCard.destroy();\n        tCard.updateValue(bCard.value * -1);\n        if (tCard.value < 1) {\n          tCard.destroy();\n        }\n      } else if (bCard.suit === \"magic\") {\n        bCard.destroy();\n        this.reshuffle();\n      }\n    }\n    this.moveBuffer = null;\n    this.clearAllDestroyed();\n    this.popIfDungeonEmpty();\n  }\n\n  reshuffle() {\n    let dRow = this.DungeonRow.spaces;\n    for (let i = 0; i < 4; i++) {\n      if (dRow[i].length === 1) {\n        this.Deck.deck.push(dRow[i].pop());\n      }\n    }\n    this.Deck.shuffle();\n  }\n\n  highlightTargets() {\n    let target = {};\n    for (let i = 0; i < 4; i++) {\n      target.location = {row: \"dungeon\", idx: i};\n      target.card = this.DungeonRow.spaces[i][0];\n      if (this.legalMove(target)) {\n        if (this.DungeonRow.spaces[i].length > 0) {\n          this.DungeonRow.spaces[i][0].validTarget = true;\n        }\n      }\n      target.location = {row: \"player\", idx: i};\n      target.card = this.PlayerRow.spaces[i][0];\n      if (this.legalMove(target)) {\n        if (this.PlayerRow.spaces[i].length > 0) {\n          this.PlayerRow.spaces[i][0].validTarget = true;\n        }  else {\n          this.validSpaces.push(i);\n        }\n      }\n    }\n    target.location = {row: \"fire\", idx: 0};\n    target.card = null;\n    if (this.legalMove(target)) {\n      this.validSpaces.push(\"fire\");\n    }\n  }\n\n  legalMove(target) {\n    const bCard = this.moveBuffer.card;\n    const bLoc = this.moveBuffer.location;\n    const tCard = target.card;\n    const tLoc = target.location;\n    const tIdx = target.index;\n    if (bLoc.row === \"dungeon\") {\n      if (bCard.suit !== \"monsters\") {\n        if (tLoc.row === \"fire\") {\n          return true;\n        } else if (tLoc.row === \"player\") {\n          if (this.PlayerRow.spaces[tLoc.idx].length === 0) {\n            return true;\n          }\n        }\n      } else if (bCard.suit === \"monsters\") {\n        if (tCard) {\n          if (tCard.suit === \"player\") {\n            return true;\n          } if (tLoc.row === \"player\") {\n              if (tCard.suit === \"shields\") {\n                return true;\n              }\n          }\n        }\n      }\n    } else if (bLoc.row === \"player\") {\n      if (bCard.suit === \"swords\") {\n        if (tCard) {\n          if (tCard.suit === \"monsters\") {\n            return true;\n          }\n        }\n      } else if (bCard.suit === \"potions\" || bCard.suit === \"magic\") {\n        if (tCard) {\n          if (tCard.suit === \"player\") {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n}\n\nexport default Board;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/board.js\n// module id = 2\n// module chunks = 0","import Card from './card.js';\n\nclass Deck {\n\n  constructor() {\n    this.deck = [];\n    for (let i = 0; i < 2; i++) {\n      for (let j = 0; j < 6; j++) {\n        this.deck.push(new Card(Card.suits[i], Card.values[j], Card.imgs[i]));\n      }\n    }\n    for (let i = 2; i < 4; i++) {\n      for (let j = 0; j < 9; j++) {\n        this.deck.push(new Card(Card.suits[i], Card.values[j], Card.imgs[i]));\n      }\n    }\n    for (let i = 0; i < 9; i++) {\n      for (let j = 0; j < 2; j++) {\n        this.deck.push(new Card(Card.suits[4], Card.values[i], Card.imgs[4]));\n      }\n    }\n    this.deck.push(new Card(Card.suits[4], Card.values[8], Card.imgs[4]));\n    for (let i = 0; i < 5; i++) {\n      this.deck.push(new Card(Card.suits[5], Card.values[9], Card.imgs[5]));\n    }\n    this.shuffle();\n    this.count = this.deck.length;\n  }\n\n  shuffle() {\n    let currentIndex = this.deck.length;\n    let tempVal;\n    let randomIndex;\n\n    while (currentIndex !== 0) {\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      tempVal = this.deck[currentIndex];\n      this.deck[currentIndex] = this.deck[randomIndex];\n      this.deck[randomIndex] = tempVal;\n    }\n  }\n\n  draw(n) {\n    const drawnCards = [];\n    while (this.count > 0 && n > 0) {\n      drawnCards.push(this.deck.pop());\n      n -= 1;\n      this.updateCount();\n    }\n    return drawnCards;\n  }\n\n  updateCount() {\n    this.count = this.deck.length;\n  }\n\n}\n\nexport default Deck;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/deck.js\n// module id = 3\n// module chunks = 0","class DungeonRow {\n  constructor() {\n    this.spaces = [\n      [],\n      [],\n      [],\n      []\n    ];\n\n    this.count = 0;\n  }\n\n  updateCount() {\n    let count = 0;\n    for (let i = 0; i < 4; i++) {\n      count += this.spaces[i].length;\n    }\n    this.count = count;\n  }\n\n  clearDestroyed() {\n    for (let i = 0; i < 4; i++) {\n      if (this.spaces[i].length) {\n        if (this.spaces[i][0].destroyed) {\n          this.spaces[i].pop();\n        }\n      }\n    }\n    this.updateCount();\n  }\n\n  fillEmpties(arr) {\n    for (let i = 0; i < 4; i++) {\n      if (this.spaces[i].length === 0 && arr.length > 0) {\n        this.spaces[i].push(arr.pop());\n      }\n    }\n    this.updateCount();\n  }\n\n  destroyCard(n) {\n    this.spaces[n][0].destroy();\n    this.clearDestroyed();\n  }\n\n  empty() {\n    for (let i = 0; i < 4; i++) {\n      if (this.spaces[i].length === 1) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n}\n\nexport default DungeonRow;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/dungeon_row.js\n// module id = 4\n// module chunks = 0","import Card from './card.js';\n\nclass PlayerRow {\n  constructor() {\n    const newPlayer = new Card(\"player\", 13, Card.imgs[6]);\n    this.spaces = [\n      [newPlayer],\n      [],\n      [],\n      []\n    ];\n  }\n\n  player() {\n    return this.spaces[0][0];\n  }\n\n  clearDestroyed() {\n    for (let i = 0; i < 4; i++) {\n      if (this.spaces[i].length) {\n        if (this.spaces[i][0].destroyed) {\n          this.spaces[i].pop();\n        }\n      }\n    }\n  }\n\n  destroyTemps() {\n    for (let i = 0; i < 4; i++) {\n      if (this.spaces[i].length) {\n        if (this.spaces[i][0].frozen) {\n          this.spaces[i][0].destroyed = true;\n        }\n      }\n    }\n  }\n}\n\nexport default PlayerRow;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/player_row.js\n// module id = 5\n// module chunks = 0","class Fire {\n\n  constructor() {\n  }\n\n  melt(card) {\n    card.destroy();\n    if ([\"potions\", \"shields\", \"swords\"].includes(card.suit)) {\n      return card.value;\n    } else {\n      return 0;\n    }\n  }\n}\n\nexport default Fire;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/fire.js\n// module id = 6\n// module chunks = 0","import Board from './board.js';\n\nclass View {\n  constructor(board, $root) {\n    this.board = board;\n    this.$root = $root;\n    this.settings = false;\n    this.sound = true;\n    this.rules = false;\n\n    this.setupBoard();\n    this.bindEvents();\n  }\n\n  setupBoard() {\n    this.$root.addClass(\"root\");\n\n    const $deck = $(\"<div>\");\n    $deck.addClass(\"deck\");\n    $deck.append($(`<img src=\"https://i.imgur.com/7nUOKbI.png\"/>`));\n    $deck.append($(`<div><span>${this.board.Deck.count}</span></div>`));\n\n    const $fire = $(\"<li>\");\n    $fire.addClass(\"fire\");\n    if (this.board.validSpaces.includes(\"fire\")) {\n      $fire.addClass(\"bright\");\n    }\n    $fire.data(\"pos\", null);\n    $fire.data(\"loc\", \"fire\");\n    $fire.append($(`<img src=\"https://i.imgur.com/phDnO3R.gif\"/>`));\n\n    const $row1 = $(\"<ul>\");\n    for (let rowIdx = 0; rowIdx < 4; rowIdx++) {\n      let $card = $(\"<div>\");\n      $card.addClass(\"card\");\n      let $cardSlot = $(\"<div>\");\n      $cardSlot.addClass(\"card-slot\");\n      let $space = $(\"<li>\");\n      $space.data(\"pos\", rowIdx);\n      $space.data(\"loc\", \"dungeon\");\n      if (this.board.DungeonRow.spaces[rowIdx].length > 0) {\n        let card = this.board.DungeonRow.spaces[rowIdx][0];\n        let value = card.value;\n        let suit = card.suit;\n        let img = card.img;\n        if (this.board.moveBuffer && card === this.board.moveBuffer.card) {\n          $space.addClass(\"selected\");\n        }\n        if (value === \"magic door\") {\n          $card.addClass(\"magic\");\n        }\n        if (card.validTarget) {\n          $card.addClass(\"valid-target\");\n        }\n        $card.text(value);\n        $card.append($(`<img src=${card.img}/>`));\n        $space.append($card);\n      } else {\n        $space.append($cardSlot);\n      }\n      $row1.append($space);\n    }\n\n    const $row2 = $(\"<ul>\");\n    for (let rowIdx = 0; rowIdx < 4; rowIdx++) {\n      let $card = $(\"<div>\");\n      $card.addClass(\"card\");\n      let $cardSlot = $(\"<div>\");\n      $cardSlot.addClass(\"card-slot\");\n      let $space = $(\"<li>\");\n      $space.data(\"pos\", rowIdx);\n      $space.data(\"loc\", \"player\");\n      if (rowIdx === 0) {\n        if (this.board.PlayerRow.spaces[rowIdx].length > 0) {\n          $card.addClass(\"player\");\n          let card = this.board.PlayerRow.spaces[rowIdx][0];\n          let health = card.value + \"/13\";\n          let score = card.specialValue;\n          let img = card.img;\n          if (card.validTarget) {\n            $card.addClass(\"valid-target\");\n          }\n          $card.text(health);\n          $card.append($(`<img src=${card.img}/>`));\n          $card.append(score);\n          $space.append($card);\n        }\n      } else if (this.board.PlayerRow.spaces[rowIdx].length > 0) {\n        let card = this.board.PlayerRow.spaces[rowIdx][0];\n        let value = card.value;\n        let suit = card.suit;\n        let img = card.img;\n        if (this.board.moveBuffer && card === this.board.moveBuffer.card) {\n          $space.addClass(\"selected\");\n        }\n        if (value === \"magic door\") {\n          $card.addClass(\"magic\");\n        }\n        if (card.frozen) {\n          $space.addClass(\"frozen\");\n        }\n        if (card.validTarget) {\n          $card.addClass(\"valid-target\");\n        }\n        $card.append($(`<span>${value}</span>`));\n        $card.append($(`<img src=${card.img}/>`));\n        $space.append($card);\n      } else {\n        $space.append($cardSlot);\n        if (this.board.validSpaces.includes(rowIdx)) {\n          $cardSlot.addClass(\"valid-target\");\n        }\n      }\n      $row2.append($space);\n    }\n\n    const $settings = $(\"<div>\");\n    $settings.addClass(\"settings\");\n\n    const $gear = $(\"<div>\");\n    $gear.addClass(\"gear\");\n    $gear.append($(`<img src=\"https://i.imgur.com/K8KgyU1.png\"/>`));\n    $settings.append($gear);\n\n    const $settingsList = $(\"<ul>\");\n    $settingsList.addClass(\"hidden\");\n\n    const $soundButton = $(\"<div>\");\n    $soundButton.append($(`<img src=\"https://i.imgur.com/sXruLuV.png\"/>`));\n\n    const $rulesButton = $(\"<div>\");\n    $rulesButton.append($(`<img src=\"https://i.imgur.com/LOyH4LH.png\"/>`));\n\n    const $restartButton = $(\"<div>\");\n    $restartButton.append($(`<img src=\"https://i.imgur.com/mhz61yk.png\"/>`));\n\n\n    const $rules = $(\"<div>\");\n    $rules.addClass(\"rules\");\n    $rules.addClass(\"hidden\");\n    $rules.append($(`<p>Greetings adventurer... In order to escape this dungeon you must clear all the cards from the deck and dungeon (top) row.</p>`));\n    $rules.append($(\"<p>The deck displays the number of its remaining cards, and the dungeon row refills whenever it contains <span><span><span>three</span></span></span> open spaces.</p>\"));\n    $rules.append($('<p>Begin by selecting a card. Selected cards are highlighted in <span>green</span>. You can unselect a card by clicking on it again. All valid targets for that card will be highlighted in <span><span>blue</span></span>. Click on a <span><span>target</span></span> to apply the <span>selected card\\'s</span> value to it.</p>'));\n    $rules.append($(\"<p>Non-monster cards cannot be used before first moving them down into your inventory. If your hands are full you can throw these items in the everpresent dungeon flames instead. The value of their melted down remains will be added to your loot. But beware! Melted down <span><span><span><span>coins</span></span></span></span> and <span><span><span><span><span>magical items</span></span></span></span></span> are worthless on the black market!</p>\"));\n    $rules.append($(\"<p>Also note that <span><span><span><span>coins</span></span></span></span> and <span><span><span><span><span><span>potions</span></span></span></span></span></span> will continue to take up a slot of your inventory until the dungeon row refills.</p>\"));\n    $rules.append($(\"<p>Escape the dungeon alive with as much loot as you can hold!</p>\"));\n\n\n    $gear.on(\"click\", (event => {\n      if (this.settings) {\n        $gear.addClass(\"turntUp\");\n        $settingsList.addClass(\"hidden\");\n        this.settings = false;\n      } else {\n        $gear.addClass(\"turnt\");\n        $gear.removeClass(\"turntUp\");\n        $settingsList.addClass(\"unhidden\");\n        $settingsList.removeClass(\"hidden\");\n        this.settings = true;\n      }\n    }));\n\n    $soundButton.on(\"click\", (event => {\n      if (this.sound === true) {\n        sound.pause();\n        this.sound = false;\n        $soundButton.empty();\n        $soundButton.append($(`<img src=\"https://i.imgur.com/s1UKgJ0.png\"/>`));\n      } else {\n        sound.play();\n        this.sound = true;\n        $soundButton.empty();\n        $soundButton.append($(`<img src=\"https://i.imgur.com/sXruLuV.png\"/>`));\n      }\n    }));\n\n    $rulesButton.on(\"click\", (event => {\n      event.stopPropagation();\n      if (this.rules) {\n        this.rules = false;\n        $rules.removeClass(\"unhidden\");\n        $rules.addClass(\"hidden\");\n      } else {\n        this.rules = true;\n        $rules.addClass(\"unhidden\");\n        $rules.removeClass(\"hidden\");\n      }\n    }));\n\n    $restartButton.on(\"click\", (event => {\n      event.stopPropagation();\n      $gear.addClass(\"turntUp\");\n      $settingsList.addClass(\"hidden\");\n      this.settings = false;\n      $(\".dd\").empty();\n      this.board = new Board;\n      this.setupBoard();\n      this.bindEvents();\n    }));\n\n\n    for (let i = 0; i < 3; i++) {\n      const $settingsItem = $(\"<li>\");\n      $settingsItem.addClass(\"settings-item\");\n      if (i === 0) {\n        $settingsItem.append($soundButton);\n        $settingsList.append($settingsItem);\n      } else if (i === 1) {\n        $settingsItem.append($rulesButton);\n        $settingsList.append($settingsItem);\n      } else if (i === 2) {\n        $settingsItem.append($restartButton);\n        $settingsList.append($settingsItem);\n      }\n      $settings.append($settingsList);\n    }\n\n    const $top = $(\"<div>\");\n    $top.addClass(\"top\");\n    $top.append($deck);\n    $top.append($fire);\n\n    const $drow = $(\"<div>\");\n    $drow.addClass(\"drow\");\n    $drow.append($row1);\n\n    const $prow = $(\"<div>\");\n    $prow.addClass(\"prow\");\n    $prow.append($row2);\n\n    const $youLose = $(\"<div>\");\n    $youLose.addClass(\"you-lose\");\n    $youLose.append($(`<img src=\"https://i.imgur.com/YeVnPoy.png\"/>`));\n\n    const $youWin = $(\"<div>\");\n    $youWin.addClass(\"you-win\");\n    $youWin.append($(`<img src=\"https://i.imgur.com/KzG4w6r.png\"/>`));\n    if (this.board.PlayerRow.spaces[0].length > 0) {\n      $youWin.append($(`<h1>Loot: <span>${this.board.PlayerRow.spaces[0][0].specialValue}</span></h1>`));\n    }\n\n    if (this.board.PlayerRow.spaces[0].length === 0) {\n      this.$root.append($settings);\n      this.$root.append($youLose);\n    } else if (this.board.Deck.count === 0 && this.board.DungeonRow.empty()) {\n      this.$root.append($settings);\n      this.$root.append($youWin);\n    } else {\n      this.$root.append($rules);\n      this.$root.append($settings);\n      this.$root.append($top);\n      this.$root.append($drow);\n      this.$root.append($prow);\n    }\n  }\n\n  bindEvents() {\n    this.$root.on(\"click\", \"li\", (event => {\n      let location;\n      let card = null;\n      let idx = $(event.currentTarget).data(\"pos\");\n      if ($(event.currentTarget).data(\"loc\") === \"dungeon\") {\n        location = \"dungeon\";\n        if (this.board.DungeonRow.spaces[idx].length > 0) {\n          card = this.board.DungeonRow.spaces[idx][0];\n        }\n      } else if ($(event.currentTarget).data(\"loc\") === \"player\") {\n        location = \"player\";\n        if (this.board.PlayerRow.spaces[idx].length > 0) {\n          card = this.board.PlayerRow.spaces[idx][0];\n        }\n      } else if ($(event.currentTarget).data(\"loc\") === \"fire\") {\n        location = \"fire\";\n      }\n      this.board.selectTarget(\n        {location: {row: location, idx: idx}, card: card}\n      );\n      this.$root.empty();\n      this.setupBoard();\n    }));\n    // this.$root.on(\"click\", \".deck\", (event => {\n    //   this.board.Deck.draw(50);\n    //   this.$root.empty();\n    //   this.setupBoard();\n    // }));\n  }\n}\n\nexport default View;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./javascripts/dd_view.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}